<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ส่งข้อมูลโปรโมทแอป</title>
  <!-- Firebase SDK (Compat Version) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, textarea, select { width: 100%; margin: 8px 0; padding: 10px; }
    button { padding: 10px 20px; }
  </style>
</head>
<body>
  <h2>แบบฟอร์มโปรโมทแอป</h2>
  <form id="promoForm">
    <input type="text" id="dev" placeholder="ชื่อผู้พัฒนา" required />
    <input type="text" id="appName" placeholder="ชื่อแอป" required />
    <textarea id="desc" placeholder="รายละเอียดแอป" required></textarea>
    <select id="type" required>
      <option value="">เลือกประเภทแอป</option>
      <option value="เกม">เกม</option>
      <option value="เครื่องมือ">เครื่องมือ</option>
      <option value="อื่นๆ">อื่นๆ</option>
    </select>
    <input type="url" id="image" placeholder="ลิงก์รูปภาพประกอบ (url)" />
    <input type="url" id="video" placeholder="ลิงก์วิดีโอ (ถ้ามี)" />
    <input type="url" id="download" placeholder="ลิงก์ดาวน์โหลด" required />
    <button type="submit">ส่งโปรโมท</button>
  </form>

  <script>
    // Firebase Config ของคุณ
    const firebaseConfig = {
      apiKey: "AIzaSyDSO0rFMvm89TycPLZIeNxNhmQTNXXVdM4",
      authDomain: "shenwang-app-promotion.firebaseapp.com",
      projectId: "shenwang-app-promotion",
      storageBucket: "shenwang-app-promotion.firebasestorage.app",
      messagingSenderId: "75453176370",
      appId: "1:75453176370:web:74769018418fa5e468ba2b"
    };

    // เริ่มต้น Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // จัดการเมื่อกดส่งฟอร์ม
    document.getElementById("promoForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      // ดึงค่าจากฟอร์ม
      const dev = document.getElementById("dev").value;
      const appName = document.getElementById("appName").value;
      const desc = document.getElementById("desc").value;
      const type = document.getElementById("type").value;
      const image = document.getElementById("image").value;
      const video = document.getElementById("video").value;
      const download = document.getElementById("download").value;

      // เตรียมข้อมูล
      const data = {
        devname: dev,
        appName: appName,
        appdescription: desc,
        appTyp: type,
        appVideo: video,
        image: image,
        dowloadLink: download,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      };

      try {
        await db.collection("promotions").add(data);
        alert("ส่งข้อมูลแล้ว รอตรวจสอบ...");
        document.getElementById("promoForm").reset();
      } catch (error) {
        console.error("เกิดข้อผิดพลาด:", error);
        alert("เกิดข้อผิดพลาดในการส่งข้อมูล");
      }
    });
  </script>
</body>
</html>
